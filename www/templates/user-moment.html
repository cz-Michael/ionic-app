<ion-view view-title="{{title}}">
  <ion-content class="padding">

    <div style="text-align: center; position: relative; background-color: silver;">
      <i class="icon ion-happy-outline" ng-show="!posts[0].posted_by.face" style="font-size: 200px;"></i>
      <img ng-src="{{posts[0].posted_by.face}}" ng-show="posts[0].posted_by.face">
      <p style="position: relative;
                top: -23px;
                right: 10px;
                text-align: right;
                color: white;">{{title}}</p>
    </div>

    <div class="list card customized-card" ng-repeat="post in posts">
      <div class="item item-body post-item-body">
          <div>
          {{post.content}}
            <ion-gallery ion-gallery-items="post.images" ion-gallery-toggle="false"></ion-gallery>
            <p class="post-created-at"><small>{{post.created_at_from_now}}</small></p>
          </div>
          <div class="post-feedback">
            <a class="button button-icon icon ion-ios-trash-outline" ng-show="post.posted_by._id == user._id" ng-click="removeMoment(post)">删除</a>
            <a class="button button-icon icon ion-ios-heart-outline" ng-click="addLike(post)">{{post.likes.length}}</a>
            <a class="button button-icon icon ion-ios-chatbubble-outline" ng-click="toggleComments(post)">{{post.comments.length}}</a>
          </div>
          <ion-list ng-show="post.showComments">
            <ion-item ng-repeat="comment in post.comments" class="post-comment-item">
              <span ng-click="openUserMoments(comment.from)">
                <i class="icon ion-happy-outline" ng-show="!comment.from.face" style="font-size: 25px;"></i>
                <img ng-src="{{comment.from.face}}" style="width: 20px; height: 20px" ng-show="comment.from.face">
              </span>
              <p ng-click="replyComment(post, comment)" class="post-comment-content">
                <b>{{comment.from.nickname}}:</b> {{comment.text}}
              </p>
            </ion-item>
            <input type="text" class="new-comment-input" auto-focus="{{post.autoFocus}}" placeholder="说两句呗..." ng-model="post.newComment.content">
            <a class="button button-icon icon ion-paper-airplane" ng-click="addComment(post)"></a>
          </ion-list>
        </div>
    </div>
  </ion-content>
</ion-view>
